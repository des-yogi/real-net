<!--DEV
@ @include('blocks/modal/modal.html')

Varying modal content: data-bs-whatever="@mdo" for btn
-->

<div class="modal fade  order-form" id="uniModal" tabindex="-1" aria-labelledby="uniModalLabel" aria-hidden="true">
  <div class="modal-dialog  modal-dialog__dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content  modal__content">
      <div class="modal-header  modal__header">
        <h5 class="h6  modal-title  modal__title" id="uniModalLabel">Modal title</h5>
        <button type="button" class="modal__close" data-bs-dismiss="modal" aria-label="Закрити">
          <svg width="24" height="24" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="img/sprite-svg.svg#close-bold"></use></svg>
        </button>
      </div>
      <div class="modal-body  modal__body">
        <p class="modal__info">Заповніть форму нижче для подачі заявки. Ми зв’яжимось з вами у найблищий час!</p>

        <form class="order-form" action="#" method="post">
          <input type="hidden" name="anyOpt" value="">

          <label class="field-text">
            <span class="field-text__name">Ваше ім’я<sup>*</sup></span>
            <span class="field-text__input-wrap">
              <input class="field-text__input" type="text" name="name" value="" placeholder="Ім’я">
              <span class="field-text__help-text" data-error="[[+tv.error.name]]">Текст помилки</span>
            </span>
          </label>

          <div class="order-form__input-group">
            <label class="field-text">
              <span class="field-text__name">Ваш номер телефону<sup>*</sup></span>
              <span class="field-text__input-wrap">
                <input class="field-text__input  phone-mask" type="tel" name="tel" value="" placeholder="+38 066 172 03 12">
                <span class="field-text__help-text" data-error="[[+tv.error.tel]]"></span>
              </span>
            </label>

            <label class="field-text">
              <span class="field-text__name">Ваш email</span>
              <span class="field-text__input-wrap">
                <input class="field-text__input" type="email" name="email" value="" placeholder="@mail.com">
                <span class="field-text__help-text" data-error="[[+tv.error.email]]"></span>
              </span>
            </label>
          </div>

          <label class="field-text">
            <span class="field-text__name">Бажаний час дзвінка</span>
            <span class="field-text__input-wrap">
              <input class="field-text__input" type="text" name="time" value="" placeholder="11:45">
              <span class="field-text__help-text" data-error="[[+tv.error.time]]"></span>
            </span>
          </label>

          <label class="field-text">
            <span class="field-text__name">Ваше повідомлення</span>
            <span class="field-text__input-wrap">
              <textarea class="field-text__input" name="message" rows="3" placeholder="Text placeholder"></textarea>
              <span class="field-text__help-text" data-error="[[+tv.error.message]]"></span>
            </span>
          </label>


          <div class="field-actions">
            <!-- <div class="field-actions__text">* — обязательные поля</div> -->
            <div class="field-actions__agreement">

              <div class="field-checkbox" style="margin: 8px 0 40px;">
                <label class="field-checkbox__name">
                  <input class="field-checkbox__input" type="checkbox" name="agreement" checked>
                  <span class="field-checkbox__name-text">Я погоджуюсь на обробку <a href="#">персональних даних</a></span>
                </label>
              </div>

              <div class="order-form__controls">
                <div class="order-form__captcha">
                  <img src="img/reCaptcha.gif" alt="" width="302" height="74" loading="lazy" style="display: block;">
                </div>
                <div class="field-actions__btn">
                  <button class="btn" type="submit" name="submit">
                    <span>Відправити</span>
                  </button>
                </div>
              </div>

            </div>
          </div>

        </form>

      </div>
    </div>
  </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function(){
      const uniModal = document.getElementById('uniModal');
      if (uniModal) {
        uniModal.addEventListener('show.bs.modal', event => {
          // Button that triggered the modal
          const button = event.relatedTarget;
          // Extract info from data-bs-* attributes
          const recipient = button.getAttribute('data-bs-whatever');
          // Update the modal's content.
          const modalTitle = uniModal.querySelector('.modal-title');
          const modalBodyInput = uniModal.querySelector('.modal-body input[name="anyOpt"]');

          modalTitle.textContent = `${recipient}`;
          modalBodyInput.value = recipient;
        })
      }
    });
  </script>
